{% extends "layout/base.html" %}

{% block title %}User Page{% endblock %}

{% block content %}

<h2>â­ Danh sÃ¡ch yÃªu thÃ­ch</h2>
<form method="get" class="filter-bar">
        <input type="text" name="keyword" placeholder="TÃ¬m theo tÃªn..."
               value="{{ keyword }}">

        <select name="sort">
            <option value="asc" {{ 'selected' if sort == 'asc' }}>TÃªn A â†’ Z</option>
            <option value="desc" {{ 'selected' if sort == 'desc' }}>TÃªn Z â†’ A</option>
        </select>

        <button type="submit" class="btn">Lá»c</button>
</form>
{% if keyword %}
    <div class="result-count">
        ğŸ” TÃ¬m tháº¥y <strong>{{ total_reports }}</strong> report cho
        "<strong>{{ keyword }}</strong>"
    </div>
{% else %}
    <div class="result-count">
        ğŸ”¢ Tá»•ng hiá»ƒn thá»‹: <strong>{{ total_reports }}</strong> report
    </div>
{% endif %}

<div class="report-grid">

    {% for r in reports %}
        <div class="report-card">
            <div class="report-header">
                <div class="report-title">
                    <span class="icon">ğŸ“„</span>
                    <h3 title="{{ r.ReportName }}">{{ r.ReportName }}</h3>
                </div>
            </div>

            <div class="report-meta">
                <span class="badge excel">EXCEL</span>
            </div>

            <div class="actions">
                <a href="{{ url_for('user.view_report', report_id=r.Id) }}" target="_blank" class="btn view">
                    ğŸ‘ Xem
                </a>

                <button class="btn download" data-report-id="{{ r.Id }}">
                    â¬‡ Táº£i
                </button>
            </div>
        </div>
    {% else %}
        <p>KhÃ´ng cÃ³ report nÃ o.</p>
    {% endfor %}
</div>


{% endblock %}
